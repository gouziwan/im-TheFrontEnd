{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/userAvarta/userAvarta.vue?bd79","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/userAvarta/userAvarta.vue?7096","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/userAvarta/userAvarta.vue?4528","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/userAvarta/userAvarta.vue?d89f","uni-app:///pages/userAvarta/userAvarta.vue","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/userAvarta/userAvarta.vue?6b8c","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/userAvarta/userAvarta.vue?4001"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4G,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAsnB,CAAgB,onBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8D1oB,8D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gVAGA;AACA,gBACA,eADA,EAEA,iBAFA,GAIA,kBACA,eADA,EAEA,eAFA,EAGA,iBAHA,GAMA,oBACA,eADA,EAEA,eAFA,EAGA,iBAHA,EAIA,cAJA,GAQA,iBACA,eADA,EAEA,iBAFA,EAGA,cAHA,GAOA,qBACA,eADA,EAEA,mBAFA,EAGA,gBAHA,G,eAMA,EACA,cACA,wBADA,EADA,EAIA,IAJA,kBAIA,CACA,SACA,OACA;AACA,QACA,UADA,EAEA,KAFA,EAFA,EAMA,EACA,YADA,EAEA,KAFA,EANA,EAUA,EACA,YADA,EAEA,KAFA,EAVA,EAcA,EACA,UADA,EAdA,CADA,EAmBA,WAnBA,EAoBA,OApBA,EAqBA,kBArBA,EAsBA,cAtBA;AAwBA,GA7BA;;AA+BA;AACA;AACA,aAFA,uBAEA;AACA;AACA,KAJA;AAKA;AACA,mBANA,6BAMA;AACA;AACA,KARA,EA/BA;;;AA0CA,SA1CA,qBA0CA;AACA;AACA,GA5CA;AA6CA;AACA,UADA,oBACA;AACA;AACA,gBADA;;AAGA,KALA;AAMA;AACA,WAPA,mBAOA,CAPA,EAOA;AACA;AACA,KATA;AAUA,eAVA,yBAUA;AACA;AACA,KAZA;AAaA,YAbA,oBAaA,CAbA,EAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBATA;;;AAYA,KA7BA;AA8BA;AACA,cA/BA,wBA+BA;AACA;AACA,KAjCA;AAkCA;AACA,gBAnCA,0BAmCA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KAvCA;AAwCA;AACA,iBAzCA,yBAyCA,GAzCA,EAyCA;AACA;AACA,gBADA;AAEA,yBAFA;AAGA;AACA;AACA;AACA;AACA,SAPA;;AASA,KAnDA;AAoDA;AACA,oBArDA,8BAqDA;AACA;;AAEA;AACA,uCADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA;AACA;AACA;AACA,0CADA;AAEA;AACA;AACA,iBAJA;AAKA;AACA;AACA,iBAPA;;AASA,aAbA;AAcA;AACA;AACA;AACA,aAjBA;;;AAoBA,SA3BA;AA4BA;AACA;AACA;AACA,mBADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA,iCADA;AAEA,oCAFA;;AAIA;AACA,aATA;;AAWA,SAzCA;;;;;;;;;;;;;;;;;;AA2DA,KAnHA;AAoHA;AACA,mBArHA,2BAqHA,GArHA,EAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OATA;AAUA,KAnIA;AAoIA;AACA,aArIA,qBAqIA,MArIA,EAqIA;;;;;;;;;;;;AAYA;;AAEA;;AAEA,KArJA;AAsJA,gBAtJA,0BAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;;AAGA;AACA;AACA,8CAFA;AAGA,8CAHA;;AAKA;AACA,OAvBA;AAwBA,KA/KA;AAgLA;AACA,iBAjLA,2BAiLA;AACA;AACA,KAnLA,EA7CA,E;;;;;;;;;;;;;ACjGA;AAAA;AAAA;AAAA;AAAuoC,CAAgB,8jCAAG,EAAC,C;;;;;;;;;;;ACA3pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/userAvarta/userAvarta.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/userAvarta/userAvarta.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./userAvarta.vue?vue&type=template&id=08c7ac86&\"\nvar renderjs\nimport script from \"./userAvarta.vue?vue&type=script&lang=js&\"\nexport * from \"./userAvarta.vue?vue&type=script&lang=js&\"\nimport style0 from \"./userAvarta.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/userAvarta/userAvarta.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userAvarta.vue?vue&type=template&id=08c7ac86&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-navbar/u-navbar\" */ \"@/uni_modules/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    \"u-Image\": function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--image/u--image\" */ \"@/uni_modules/uview-ui/components/u--image/u--image.vue\"\n      )\n    },\n    uActionSheet: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-action-sheet/u-action-sheet\" */ \"@/uni_modules/uview-ui/components/u-action-sheet/u-action-sheet.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userAvarta.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userAvarta.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"user_avarta\">\r\n\t\t <u-navbar\r\n\t\t\tbgColor=\"#000000\"\r\n\t\t>\r\n\t\t\t<template slot=\"left\">\r\n\t\t\t\t<text class=\"iconfont icon-fanhui\" @click=\"toBack\"></text>\r\n\t\t\t</template>\r\n\t\t\t<template slot=\"center\">\r\n\t\t\t\t<text class=\"user_avarta_title\">\r\n\t\t\t\t\t个人头像\r\n\t\t\t\t</text>\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t<!-- #ifndef  MP -->\r\n\t\t\t\t<template slot=\"right\">\r\n\t\t\t\t\t<!--小程序有胶囊挡住  -->\r\n\t\t\t\t\t<text class=\"iconfont icon-shenglvehao\" @click=\"onShowPopup\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t<!-- #endif -->\r\n\t\t</u-navbar>\r\n\t\t<!-- #ifndef H5   -->\r\n\t\t<view class=\"user_content\" @touchend=\"onTouchend\" @touchstart.stop=\"onTouchstart\">\r\n\t\t\t<u--image :src=\"getAvataImg\"  :width=\"getSystem\" :height=\"getSystem\"></u--image>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t\r\n\t\t<!-- #ifdef H5   -->\r\n\t\t<view class=\"user_content\">\r\n\t\t\t<u--image :src=\"getAvataImg\"  :width=\"getSystem\" :height=\"getSystem\"></u--image>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t\r\n\t\t<!-- 上拉菜单 -->\r\n\t\t<u-action-sheet :actions=\"list\" :show=\"show\" safeAreaInsetBottom closeOnClickOverlay @close=\"onClose\" @select=\"onSelect\"></u-action-sheet>\r\n\t\t\r\n\t\t<!-- 提示 -->\r\n\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\t\t\r\n\t\t <view class=\"container\" v-if=\"cropperShow\">\r\n\t\t    <view class=\"cropper-wrap\">\r\n\t\t      <image-cropper\r\n\t\t        id=\"image-cropper\"\r\n\t\t        :zoom=\"1\"\r\n\t\t        :angle=\"0\"\r\n\t\t        :src=\"src\"\r\n\t\t        canvasBackground=\"red\"\r\n\t\t        @cropped=\"onCropped\"\r\n\t\t\t\t:boundDetect=\"true\"\r\n\t\t\t\tdisableRotate\r\n\t\t      />\r\n\t\t    </view>\r\n\t\t   <view class=\"cropper-button\">\r\n\t\t\t   \t<button class=\"cropper-button-quxiaoo\" type=\"default\" @click=\"cancelCropped\">取消</button>\r\n\t\t\t    <button class=\"cropper-button-send\" type=\"default\" @click=\"uploadOPictures(cropperSrc)\">上传图片</button>\r\n\t\t   </view>\r\n\t\t</view>\r\n\t\t\r\n\t</view>\n</template>\n\n<script>\r\n\timport { downAvartImg,http,uploadUserAvatar } from \"../../Api/index.js\"\t\r\n\timport cropper from \"@/components/cropper.vue\"\r\n\r\n\t// 保存图片的时候提示\r\n\tconst SaveImg = {\n\t\ttype: 'loading',\r\n\t\tduration:1500000\n\t}\r\n\tconst SaveError = {\r\n\t\ttype:'default',\r\n\t\ttitle: '保存图片失败',\r\n\t\tmessage: '保存图片失败',\r\n\t}\r\n\t\r\n\tconst SaveSuceeou = {\r\n\t\ttype:'default',\r\n\t\ttitle:'保存图片成功',\r\n\t\tmessage:\"保存图片成功\",\r\n\t\tduration:2000\r\n\t}\r\n\t\r\n\t\r\n\tconst upAvatar = {\r\n\t\ttype:'default',\r\n\t\tmessage:'图片上传失败',\r\n\t\tduration:2000\r\n\t}\r\n\t\r\n\t\r\n\tconst uploadAvatar = {\r\n\t\ttype:'loading',\r\n\t\tmessage:'图片上传中。。。',\r\n\t\tduration:159999\r\n\t}\r\n\t\r\n\texport default{\r\n\t\tcomponents:{\r\n\t\t\t'image-cropper':cropper\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tlist:[\r\n\t\t\t\t\t// id 1为拍照 3.保存图片 2.选择相册  取消就不用了点击会自动取消\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:'拍照',\r\n\t\t\t\t\t\tid:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:'选择相册',\r\n\t\t\t\t\t\tid:2,\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:'保存图片',\r\n\t\t\t\t\t\tid:3\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:'取消',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tshow:false,\r\n\t\t\t\tsrc:'',\r\n\t\t\t\tcropperShow:false,\r\n\t\t\t\tcropperSrc:''\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcomputed:{\r\n\t\t\t// 获取手机屏幕的宽度\r\n\t\t\tgetSystem(){\r\n\t\t\t\treturn  uni.getSystemInfoSync().screenWidth\r\n\t\t\t},\r\n\t\t\t// 获取设备信息\r\n\t\t\tgetSystemHeight(){\r\n\t\t\t\treturn uni.getSystemInfoSync().screenHeight\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tconsole.log(this.getSystem)\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoBack(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta:1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 关闭\r\n\t\t\tonClose(e){\r\n\t\t\t\tthis.show = false\r\n\t\t\t},\r\n\t\t\tonShowPopup(){\r\n\t\t\t\tthis.show = true\r\n\t\t\t},\r\n\t\t\tonSelect(e){\r\n\t\t\t\tif(e.id == undefined) return \r\n\t\t\t\tlet id = e.id;\r\n\t\t\t\t\t// id 1为拍照 3.保存图片 2.选择相册  取消就不用了点击会自动取消\r\n\t\t\t\tswitch(id){\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.getPhotoAlbum('camera')\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.getPhotoAlbum('album')\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tthis.saveAlbumLocally()\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\r\n\t\t\t},\r\n\t\t\t// 小程序用手指触摸触发事件\r\n\t\t\tonTouchend(){\r\n\t\t\t\tclearTimeout(this.$skmaId)\r\n\t\t\t},\r\n\t\t\t// 触发事件\r\n\t\t\tonTouchstart(){\r\n\t\t\t\tthis.$shake(()=>{\r\n\t\t\t\t\tthis.onShowPopup();\r\n\t\t\t\t},1000)\r\n\t\t\t},\r\n\t\t\t// 获取相册图片 或者参数\r\n\t\t\tgetPhotoAlbum(str){\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount:1,\r\n\t\t\t\t\tsourceType:[str],\r\n\t\t\t\t\tsuccess:v =>{\r\n\t\t\t\t\t\tthis.src = v.tempFilePaths[0];\r\n\t\t\t\t\t\tthis.cropperShow = true\r\n\t\t\t\t\t\t// this.uploadOPictures(v.tempFilePaths[0])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 保存相片到本地\r\n\t\t\tsaveAlbumLocally(){\r\n\t\t\t\tlet _this = this\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tuni.authorize({\r\n\t\t\t\t\tscope:'scope.writePhotosAlbum',\r\n\t\t\t\t\tsuccess: v => {\r\n\t\t\t\t\t\t// 下载网络图片\r\n\t\t\t\t\t\t// 下载的时候添加一个提示\r\n\t\t\t\t\t\tSaveImg.message = \"保存图片中\"\r\n\t\t\t\t\t\tthis.$refs.uToast.show(SaveImg)\r\n\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\turl:_this.getAvataImg,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t// 下载成保存图片到本地相册\r\n\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\t\tfilePath:res.tempFilePath,\r\n\t\t\t\t\t\t\t\t\tsuccess: v =>{\r\n\t\t\t\t\t\t\t\t\t\t_this.$refs.uToast.show(SaveSuceeou)\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail:e=>{\r\n\t\t\t\t\t\t\t\t\t\t_this.$refs.uToast.show(SaveError)\r\n\t\t\t\t\t\t\t\t\t}\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t// 下载失败的情况\r\n\t\t\t\t\t\t\tfail: e =>{\r\n\t\t\t\t\t\t\t\tthis.$refs.uToast.show(SaveError)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: e=> {\r\n\t\t\t\t\t\t// 获取用当前的设置\r\n\t\t\t\t\t\tuni.getSetting({\r\n\t\t\t\t\t\t   success(res) {\r\n\t\t\t\t\t\t\t// 表示用户取消了授权\r\n\t\t\t\t\t\t     if(res.authSetting.value === false){\r\n\t\t\t\t\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t\t\t\t\ttype:'default',\r\n\t\t\t\t\t\t\t\t\tmessgae:'用户取消了授权'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tSaveImg.message = \"保存图片中\"\r\n\t\t\t\t\tthis.$refs.uToast.show(SaveImg)\r\n\t\t\t\t\tdownAvartImg(this.userInfo.imgurl,res =>{\r\n\t\t\t\t\t\tif(res.data instanceof Object){\r\n\t\t\t\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t\t\t\ttype:'default',\r\n\t\t\t\t\t\t\t\tmessage:res.data.msg\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$refs.uToast.show(SaveSuceeou)\r\n\t\t\t\t\t\t\twindow.location.replace(http +'/down/downImg?name='+this.userInfo.imgurl)\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 将新的头像图片上传到服务器\r\n\t\t\tuploadOPictures(url){\r\n\t\t\t\tthis.$refs.uToast.show(uploadAvatar)\r\n\t\t\t\tif(url ==undefined) url = this.src;\r\n\t\t\t\tlet token = uni.getStorageSync('user_token');\r\n\t\t\t\tuploadUserAvatar(url,token,v => {\r\n\t\t\t\t\tlet data = JSON.parse(v.data);\r\n\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\tthis.userInfo.imgurl = data.imgurl\r\n\t\t\t\t\t\tthis.$refs.uToast.hide();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$refs.uToast.show(upAvatar)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cropperShow = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取裁剪后的图片\r\n\t\t\tonCropped(base64){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tbase64 = base64.split(',');\r\n\t\t\t\t\r\n\t\t\t\tlet res = /\\bimage\\b\\/(png|jpg|jpge)/;\r\n\t\t\t\t\r\n\t\t\t\tlet contentType = base64[0].match(res)[0];\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis.base64ToBlob({b64data:base64[1] , contentType}).then(res=>{\r\n\t\t\t\t\tthis.cropperSrc = res.preview\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// 除了 h5 以为运行这条代码\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\t\tthis.cropperSrc = base64\r\n\t\t\t\t// #endif\r\n\t\t\t},\t\t\r\n\t\t\tbase64ToBlob ({b64data = '', contentType = '', sliceSize = 512} = {}) {\r\n\t\t\t      return new Promise((resolve, reject) => {\r\n\t\t\t        // 使用 atob() 方法将数据解码\r\n\t\t\t        let byteCharacters = atob(b64data);\r\n\t\t\t        let byteArrays = [];\r\n\t\t\t        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n\t\t\t          let slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\t\t\t          let byteNumbers = [];\r\n\t\t\t          for (let i = 0; i < slice.length; i++) {\r\n\t\t\t              byteNumbers.push(slice.charCodeAt(i));\r\n\t\t\t          }\r\n\t\t\t          // 8 位无符号整数值的类型化数组。内容将初始化为 0。\r\n\t\t\t          // 如果无法分配请求数目的字节，则将引发异常。\r\n\t\t\t          byteArrays.push(new Uint8Array(byteNumbers));\r\n\t\t\t        }\r\n\t\t\t        let result = new Blob(byteArrays, {\r\n\t\t\t          type: contentType\r\n\t\t\t        })\r\n\t\t\t        result = Object.assign(result,{\r\n\t\t\t          // jartto: 这里一定要处理一下 URL.createObjectURL\r\n\t\t\t          preview: URL.createObjectURL(result),\r\n\t\t\t          name: `图片示例.png`\r\n\t\t\t        });\r\n\t\t\t        resolve(result)\r\n\t\t\t      })\r\n\t\t\t   },\r\n\t\t\t// 取消\r\n\t\t\tcancelCropped(){\r\n\t\t\t\tthis.cropperShow = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\n</script>\n\n<style lang=\"scss\">\r\n\t.container {\r\n\t  position: absolute;\r\n\t  top: 0;\r\n\t  height: 100%;\r\n\t  width: 100%;\r\n\t}\r\n\t.cropper-wrap {\r\n\t  height: calc(100% - 96rpx);\r\n\t}\r\n\t\r\n\t.cropper-button{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t\r\n\t.cropper-button-send{\r\n\t\twidth: 300rpx;\r\n\t}\r\n\t\r\n\t.cropper-button-quxiaoo{\r\n\t\twidth: 300rpx;\r\n\t}\r\n\t\r\n\t.user_avarta{\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #000000;\r\n\t}\r\n\t.user_avarta_title{\r\n\t\tcolor: #eaeaea;\r\n\t}\r\n\t\r\n\t.iconfont.icon-fanhui,.iconfont.icon-shenglvehao{\r\n\t\tcolor: #eaeaea;\r\n\t\tfont-size: 25px;\r\n\t}\r\n\t\r\n\t\r\n\t.user_content{\r\n\t\tposition: absolute;\r\n\t\ttop:50%;\r\n\t\ttransform: translateY(-50%);\r\n\t}\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userAvarta.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userAvarta.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1646625161180\n      var cssReload = require(\"C:/Users/91645/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}