{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/index/index.vue?8002","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/index/index.vue?645d","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/index/index.vue?a03d","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/index/index.vue?5d0c","uni-app:///pages/index/index.vue","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/index/index.vue?0acf","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/index/index.vue?ce76"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,6F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,+WAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAinB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsFroB;AACA,8D;AACA;AACA,MADA,kBACA;AACA;AACA,gBADA;AAEA;AACA,0BAHA;AAIA;AACA,mBALA;AAMA,0BANA;AAOA,qBAPA;AAQA;AACA,uBATA;AAUA,iBAVA;AAWA;AACA;AACA,kBADA;AAEA;AACA,gCADA,EAFA,EADA;;;AAOA;AACA,kBADA;AAEA;AACA,8CADA,EAFA,EAPA,CAXA;;;;;AA0BA,GA5BA;AA6BA,QA7BA,oBA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA,GAzCA;AA0CA;AACA,eADA,yBACA;AACA,uBADA,CACA,QADA,sBACA,QADA,CACA,UADA,sBACA,UADA,CACA,IADA,sBACA,IADA;AAEA,YAFA,GAEA,aAFA,CAEA,MAFA;;AAIA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WARA,MAQA;AACA;AACA;AACA;AACA,SAbA,EAaA,CAbA;;AAeA;AACA,WADA;AAEA,iCAFA;AAGA,2BAHA;AAIA,sBAJA;AAKA,uBALA;;AAOA;AACA,OA5BA;AA6BA;AACA,KAzCA;AA0CA,UA1CA,oBA0CA;AACA;AACA,KA5CA,EA1CA;;;;;;;;;;AAgGA;AACA;AACA,sBAFA,8BAEA,CAFA,EAEA;AACA;AACA;;;;;;;;AAQA;;;;AAIA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KArBA;AAsBA;AACA,sBAvBA,8BAuBA,CAvBA,EAuBA;;;;;AAKA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KAjCA;AAkCA;AACA,sBAnCA,gCAmCA;AACA;AACA,KArCA;AAsCA;AACA,oBAvCA,8BAuCA;AACA;AACA,KAzCA;AA0CA;AACA,gBA3CA,0BA2CA;AACA;AACA,+BADA;;AAGA,KA/CA;AAgDA;AACA,mBAjDA,2BAiDA,CAjDA,EAiDA;AACA,YADA,GACA,CADA,CACA,MADA,CACA,IADA,GACA,CADA,CACA,IADA,CACA,MADA,GACA,CADA,CACA,MADA;AAEA;AACA,gGADA;;AAGA,KAtDA;AAuDA;AACA,oBAxDA,8BAwDA;AACA;AACA,4BADA;AAEA;AACA;AACA,SAJA;;AAMA,KA/DA;AAgEA;AACA,cAjEA,sBAiEA,IAjEA,EAiEA;AACA,WADA,GACA,IADA,CACA,IADA,CACA,KADA;;AAGA;AACA,mBADA;AAEA,mBAFA;AAGA,mBAHA;;AAKA;AACA,KA1EA;AA2EA;AACA,mBA5EA,6BA4EA;AACA;AACA;AACA,KA/EA;AAgFA,mBAhFA,2BAgFA,KAhFA,EAgFA;AACA;AACA;AACA,KAnFA;AAoFA,iBApFA,yBAoFA,GApFA,EAoFA;AACA;AADA,UAEA,KAFA,GAEA,GAFA,CAEA,KAFA,CAEA,IAFA,GAEA,GAFA,CAEA,IAFA;AAGA,YAHA,GAGA,aAHA,CAGA,MAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBALA;AAMA;AACA;AACA,aAVA;AAWA;AACA,gBAtBA;;AAwBA,KAjHA,EAhGA;;AAmNA;AACA,eADA,uBACA,QADA,EACA,SADA,EACA;AACA;AACA;AACA;AACA,KALA,EAnNA,E;;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAkoC,CAAgB,yjCAAG,EAAC,C;;;;;;;;;;;ACAtpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-navbar/u-navbar\" */ \"@/uni_modules/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uAvatar: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-avatar/u-avatar\" */ \"@/uni_modules/uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uLoadingIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loading-icon/u-loading-icon\" */ \"@/uni_modules/uview-ui/components/u-loading-icon/u-loading-icon.vue\"\n      )\n    },\n    uSearch: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-search/u-search\" */ \"@/uni_modules/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-empty/u-empty\" */ \"@/uni_modules/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uSwipeAction: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action/u-swipe-action\" */ \"@/uni_modules/uview-ui/components/u-swipe-action/u-swipe-action.vue\"\n      )\n    },\n    uSwipeActionItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item\" */ \"@/uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item.vue\"\n      )\n    },\n    uBadge: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-badge/u-badge\" */ \"@/uni_modules/uview-ui/components/u-badge/u-badge.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.getDialogue, function(item, __i0__) {\n    var $orig = _vm.__get_orig(item)\n\n    var g0 = _vm.DateTiem.diffDay(item.time)\n    var m0 = _vm.newsUpdate(item)\n    return {\n      $orig: $orig,\n      g0: g0,\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"index\"\r\n\t\t<!-- #ifdef H5 -->\r\n\t\t:style=\"getHeight\"\r\n\t\t<!-- #endif -->\r\n\t>\r\n\t\t<u-navbar\r\n\t\t\t:border=\"true\"\r\n\t\t\tfixed\r\n\t\t\tplaceholder\r\n\t\t    >\r\n\t\t\t<template slot=\"left\">\r\n\t\t\t\t<u-avatar :src=\"getAvataImg\" size=\"33\" shape=\"square\" mode=\"aspectFill\"></u-avatar>\r\n\t\t\t</template>\r\n\t\t\t<template slot=\"center\">\r\n\t\t\t\t<view v-if=\"isLink === true\">狗子通讯</view>\r\n\t\t\t\t<view style=\"display: flex;\" v-else>\r\n\t\t\t\t\t<u-loading-icon size=\"16\" mode=\"semicircle\" style=\"margin-right: 10px;\"></u-loading-icon>   连接中...\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<!-- #ifndef MP-->\r\n\t\t\t\t<template slot=\"right\">\r\n\t\t\t\t\t<text class=\"iconfont icon-sousuo\" style=\"margin-right: 20px;\" @click=\"toSearchPage\"></text>\r\n\t\t\t\t\t<text class=\"iconfont icon-add\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t<!-- #endif -->\t\r\n\t\t</u-navbar>\r\n\t\t\r\n\t\t<!-- 小程序编译 -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"index_content\" \r\n\t\t\trefresher-enabled \r\n\t\t\tscroll-y\r\n\t\t\trefresher-background=\"#f9f9f9\"\r\n\t\t\trefresher-default-style=\"none\"\r\n\t\t\t:refresher-triggered=\"currentStatus\"\r\n\t\t\t@refresherpulling=\"onRefresherpulling\"\r\n\t\t\t@refresherrefresh=\"onRefresherrefresh\"\r\n\t\t\t@refresherrestore=\"onRefresherrestore\"\r\n\t\t\t@refresherabort=\"onRefresherabort\"\r\n\t\t>\r\n\t\t\t<!-- 下拉刷新-->\r\n\t\t\t<view class=\"index_content_refresher\" :style=\"{\r\n\t\t\t\ttop:currentY+'px'\r\n\t\t\t}\">\r\n\t\t\t\t<text class=\"iconfont icon-xialashuaxin\"></text>\r\n\t\t\t\t<text>{{refreshPromp}}</text>\r\n\t\t\t</view>\r\n\t\t<!-- #ifdef MP-->\r\n\t\t\t<view @click.stop.prevent=\"toSearchPage\">\r\n\t\t\t\t<u-search placeholder=\"搜索\" v-model=\"search\" :showAction=\"false\" :disabled=\"true\"></u-search>\r\n\t\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t\t<view class=\"index_content-list\">\r\n\t\t\t\t\t<u-empty mode=\"message\" icon=\"../../static/images/消息为空.png\" v-if=\"getDialogue.length === 0\"></u-empty>\r\n\t\t\t\t\t<u-swipe-action >\r\n\t\t\t\t\t\t<u-swipe-action-item :options=\"options\" :uuid=\"item.userid\" v-for=\"item in getDialogue\" :key=\"item.userid\" @click=\"onSelectClick\" ref=\"swipe-item\" :name=\"item.userid\">\r\n\t\t\t\t\t\t\t<view class=\"index_content-item\" >\r\n\t\t\t\t\t\t\t\t<view class=\"index_content-item_img\" data-value=\"item\" @click=\"toFriendDetails(item)\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"index_content-content\">\r\n\t\t\t\t\t\t\t\t\t\t<u-avatar :src=\"img+item.imgurl\" size=\"100rpx\" shape=\"square\" mode=\"aspectFill\" @click=\"toFriendDetails(item)\"></u-avatar>\r\n\t\t\t\t\t\t\t\t\t\t<u-badge type=\"eeror\" max=\"99\" :value=\"item.total\" class=\"index_content-u-badge\" ></u-badge>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"index_content-item_text\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"index_content-item_text_name\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"index_content-item_text_name_name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"index_content-item_text_name_day\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ DateTiem.diffDay(item.time) }}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"index_content-item_text_bei\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ newsUpdate(item) }}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>  \r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</u-swipe-action-item>\r\n\t\t\t\t\t</u-swipe-action>\r\n\t\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { mapState,mapGetters } from \"vuex\"\r\n\timport { img,setMsgRead } from \"../../Api/index.js\"\r\n\texport default {\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tsearch:'',\r\n\t\t\t\t// 当前下拉状态\r\n\t\t\t\tcurrentStatus:false,\r\n\t\t\t\t// 当前的未知\r\n\t\t\t\tcurrentY:-30,\r\n\t\t\t\trefreshPromp:'下拉刷新',\r\n\t\t\t\timg:img,\r\n\t\t\t\t// 是否更新节点\r\n\t\t\t\tupdateNode:false,\r\n\t\t\t\tnewsArr:[],\r\n\t\t\t\toptions:[\r\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: '删除',\r\n\t\t\t\t\t\tstyle:{\r\n\t\t\t\t\t\t\tbackgroundColor:'red'\r\n\t\t\t\t\t\t}\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext:'已读',\r\n\t\t\t\t\t\tstyle:{\r\n\t\t\t\t\t\t\tbackgroundColor:'rgb(60, 156, 255)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\t// 这里主要是更新 如果 Vuex 更新了列表之后 如果页面是隐藏的 就会出现新增的列表滑动不了\r\n\t\t\tif(this.updateNode){\r\n\t\t\t\tlet arr = this.$refs['swipe-item']\r\n\t\t\t\tif(arr instanceof Array){\r\n\t\t\t\t\tarr.forEach(el=>{\r\n\t\t\t\t\t\tel.init();\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.updateNode = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.gethistyDialogue()\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tgetDialogue(){\r\n\t\t\t\tconst { userChar ,userFriend,list } = this.$store.state\r\n\t\t\t\tconst { userid } = this.userInfo\r\n\t\t\t\t\r\n\t\t\t\tif(!(list[userid] instanceof Object)) return []\r\n\t\t\t\t\r\n\t\t\t\tconst keys = Object.keys(list[userid]);\r\n\t\t\t\t\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\t\r\n\t\t\t\tkeys.forEach(k=>{\r\n\t\t\t\t\tlet val = userFriend.filter(el => el.userid === k)[0]\r\n\t\t\t\t\tlet char = userChar[k]\r\n\t\t\t\t\tif(val == undefined || char == undefined) return\r\n\t\t\t\t\tchar.sort((a,b) => \tb.send_tiem * 1 - a.send_tiem * 1);\r\n\t\t\t\t\tlet total = char.reduce((total,el) => {\r\n\t\t\t\t\t\tif(el.static == 1 && this.userInfo.userid !== el.userId){\r\n\t\t\t\t\t\t\tlet arr = this.unreadMsg[el.userId];\r\n\t\t\t\t\t\t\tif(!(arr instanceof Array)) arr = [];\r\n\t\t\t\t\t\t\tif((arr.indexOf(el.id)) === -1){\r\n\t\t\t\t\t\t\t\tarr.push(el.id)\r\n\t\t\t\t\t\t\t\tthis.unreadMsg[el.userId] = arr\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t++total\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttotal \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn total\r\n\t\t\t\t\t},0)\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t...val,\r\n\t\t\t\t\t\ttime:char[0].send_tiem,\r\n\t\t\t\t\t\tnews:char[0].msg,\r\n\t\t\t\t\t\ttotal,\r\n\t\t\t\t\t\tchar:char[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(data)\r\n\t\t\t\t})\t\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\tisLink(){\r\n\t\t\t\treturn this.$store.state.isLink\r\n\t\t\t},\r\n\t\t\t// #ifdef H5 \r\n\t\t\t\tgetHeight(){\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\theight:`calc(${this.innerHeight}px - 50px)`\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn data\r\n\t\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 自定义下拉刷新控件被下拉\r\n\t\t\tonRefresherpulling(e){\r\n\t\t\t\tlet y = ''\r\n\t\t\t\tthis.currentStatus = false\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t\ty = e.detail.deltaY - 40;\r\n\t\t\t\t\tthis.currentY = y\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\t\ty = e.detail.dy\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t\r\n\t\t\t\tif(y >= 45){\r\n\t\t\t\t\tthis.refreshPromp = \"松开刷新\"\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.refreshPromp = \"下拉刷新\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 自定义下拉刷新\r\n\t\t\tonRefresherrefresh(e){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tlet y = e.currentTarget.offsetTop - 35;\r\n\t\t\t\tthis.currentY= y\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.currentStatus = true;\r\n\t\t\t\tthis.refreshPromp = '加载中。。。'\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.currentStatus = false\r\n\t\t\t\t},3000)\r\n\t\t\t},\r\n\t\t\t// 复位\r\n\t\t\tonRefresherrestore(){\r\n\t\t\t\tthis.currentY = -30;\r\n\t\t\t},\r\n\t\t\t// 中止\r\n\t\t\tonRefresherabort(){\r\n\t\t\t\tthis.currentY = -30;\r\n\t\t\t},\r\n\t\t\t// 点击跳转到搜索页面\r\n\t\t\ttoSearchPage(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"../search/search\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 跳转到好友详情页面\r\n\t\t\ttoFriendDetails(e){\r\n\t\t\t\tlet {imgurl,name,userid} = e\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:`../chat/chat?id=${userid}&name=${name}&imgurl=${imgurl}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取历史聊天窗口\r\n\t\t\tgethistyDialogue(){\r\n\t\t\t\tthis.$getStorage({\r\n\t\t\t\t\tkey:'user_dialogue',\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\tthis.$store.state.list = res\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 监测一个消息就是说 如果是 图片不就只显示图片2字\r\n\t\t\tnewsUpdate(item){\r\n\t\t\t\tconst { char:{ types } } = item\r\n\r\n\t\t\t\tlet data ={\r\n\t\t\t\t\t'2':'[图片]',\r\n\t\t\t\t\t'3':'[视频]',\r\n\t\t\t\t\t'4':'[位置]'\r\n\t\t\t\t}\r\n\t\t\t\treturn data[types] == undefined ? item.news : data[types]\r\n\t\t\t},\r\n\t\t\t// 记录打开的用户下次的时候就不会更新\r\n\t\t\tgetRecordFriend(){\r\n\t\t\t\tlet result =  uni.getStorageSync('user_dialogue');\r\n\t\t\t\treturn result == '' || result == undefined ? {} : JSON.parse(this.decrypt(result))\t\t\r\n\t\t\t},\r\n\t\t\tsetRecordFriend(value){\r\n\t\t\t\tvalue = this.encrypt(JSON.stringify(value));\r\n\t\t\t\tuni.setStorageSync('user_dialogue',value);\r\n\t\t\t},\r\n\t\t\tonSelectClick(val){\r\n\t\t\t\t// index = 0 删除会话 1已读 2就是置顶聊天信息\r\n\t\t\t\tconst { index , name} = val\r\n\t\t\t\tconst { userid } = this.userInfo;\r\n\t\t\t\t\r\n\t\t\t\tswitch(index){\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tlet val = this.getRecordFriend();\r\n\t\t\t\t\t\tdelete val[userid][name];\r\n\t\t\t\t\t\tthis.$store.state.list = val;\r\n\t\t\t\t\t\tthis.setRecordFriend(val)\t\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tlet arr = this.unreadMsg[name];\r\n\t\t\t\t\t\tif(arr instanceof Array && arr.length > 0){\r\n\t\t\t\t\t\t\tsetMsgRead(arr,res=>{\r\n\t\t\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\t\t\tthis.userChar[name] = this.userChar[name].map(el=>{\r\n\t\t\t\t\t\t\t\t\t\tif(arr.indexOf(el.id) !== -1){\r\n\t\t\t\t\t\t\t\t\t\t\tel.static = '0'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn el\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.unreadMsg[name] = []\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tgetDialogue(newValue,loadValue){\r\n\t\t\t\tif(loadValue !== undefined && newValue.length > loadValue.length){\r\n\t\t\t\t\tthis.updateNode = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.index{\r\n\t\tbackground-color: #f0f0f0;\r\n\t\toverflow:hidden;\r\n\t\t\r\n\t\t/*#ifdef MP*/\r\n\t\t\theight: 100vh;\r\n\t\t/* #endif*/\r\n\t\r\n\t\t/*#ifdef H5*/\r\n\t\t\theight: calc(100vh - 50px);\r\n\t\t/* #endif*/\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tflex-flow:column nowrap;\r\n\t\r\n\t}\r\n\t\r\n\t.index_content{\r\n\t\tbackground-color: $uni-bg-color;\r\n\t\tflex:1;\r\n\t\tposition: relative;\r\n\t\t// h5 平台没有 下拉框 只需减去 导航栏高度\r\n\t\t/*#ifdef H5*/\r\n\t\t\theight: calc(100vh - 44px - 100px);\r\n\t\t/* #endif*/\r\n\t\t// 微信 平台有一个44px的搜索框 下拉框 只需减去 导航栏高度\r\n\t\t/*#ifdef MP*/\r\n\t\t\theight: calc(100vh - 44px - 44px - 50px);\r\n\t\t/* #endif*/\r\n\t\toverflow: hidden;\r\n\t\t.index_content-list{\r\n\t\t\t.index_content-item_img{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tpadding: 10px;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tborder-bottom: solid 1rpx #f3f1f1;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t\r\n\t\t\t\t.index_content-content{\r\n\t\t\t\t\t\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t.index_content-u-badge{\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\tbackground-color: red;\r\n\t\t\t\t\t\ttop: -10rpx;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tright: -10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.index_content-item_text{\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-left: 10px;\r\n\t\t\t\t\t.index_content-item_text_name{\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t.index_content-item_text_name_name{\r\n\t\t\t\t\t\t\twidth: 100px;\r\n\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\tfont-size: $uni-font-size-el;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.index_content-item_text_name_day{\r\n\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\tcolor: $uni-text-color-grey;\r\n\t\t\t\t\t\t\tfont-size: $uni-font-size-sm;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t.index_content-item_text_bei{\r\n\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tmargin-top: 5px;\r\n\t\t\t\t\t\tcolor: $uni-text-color-grey;\r\n\t\t\t\t\t\tfont-size: $uni-font-size-sm;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.index_content_refresher{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: absolute;\r\n\t\tjustify-content: center;\r\n\t\twidth: 100%;\r\n\t\ttop:0;\r\n\t\t.iconfont.icon-xialashuaxin{\r\n\t\t\tfont-size: 20px;\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1646625161171\n      var cssReload = require(\"C:/Users/91645/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}