{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/chat/chat.vue?8ed7","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/chat/chat.vue?8849","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/chat/chat.vue?9074","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/chat/chat.vue?2739","uni-app:///pages/chat/chat.vue","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/chat/chat.vue?7201","webpack:///C:/Users/91645/Desktop/Vue项目/狗子通讯/新狗子通讯/pages/chat/chat.vue?5963"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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mFA,gBAnFA,wBAmFA,CAnFA,EAmFA;AACA,cADA,CACA,MADA,aACA,MADA,CACA,SADA,aACA,SADA;;AAGA;;AAEA;AACA,KAzFA;AA0FA,iBA1FA,yBA0FA,CA1FA,EA0FA;AACA,QADA,GACA,CADA,CACA,EADA,CACA,KADA,GACA,CADA,CACA,KADA;AAEA;AACA;AACA,OAFA,MAEA;AACA,gBADA,GACA,IADA,CACA,QADA,CACA,QADA,GACA,IADA,CACA,QADA;AAEA;AACA,0BADA;AAEA,2BAFA;AAGA,uCAHA;;;AAMA;AACA,qBADA;AAEA;AACA,8BADA;AAEA,mCAFA,EAFA;;AAMA;AACA;AACA;AACA;AACA;AACA,WAXA;AAYA;AACA;AACA,WAdA;AAeA;AACA;AACA,qCADA;AAEA,gCAFA;AAGA,0BAHA;AAIA,0BAJA;AAKA,mCALA;AAMA,uBANA;AAOA,oBAPA;AAQA,mCARA;;AAUA;AACA,WA3BA;;AA6BA;AACA,KApIA;AAqIA,gBArIA,wBAqIA,GArIA,EAqIA;AACA,eADA,GACA,IADA,CACA,SADA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KAjJA;AAkJA;AACA,gBAnJA,0BAmJA;AACA,YADA,GACA,aADA,CACA,MADA;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAnKA;AAoKA,mBApKA,2BAoKA,CApKA,EAoKA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAFA,EAEA,IAFA;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,EAEA,CAFA;AAGA,SALA,EAKA,CALA;AAMA,OAXA,EAWA,IAXA;AAYA,KA5LA;AA6LA;AACA,oBA9LA,4BA8LA,KA9LA,EA8LA;AACA,cADA,GACA,IADA,CACA,QADA,CACA,QADA,GACA,IADA,CACA,QADA;AAEA;AACA,kCADA;AAEA,gBAFA;AAGA,+BAHA;AAIA,0BAJA;AAKA,6BALA;AAMA,iBANA;;AAQA;AACA,iBADA;AAEA;AACA;AACA,SAJA;;AAMA,KA9MA;AA+MA,eA/MA,uBA+MA,GA/MA,EA+MA,GA/MA,EA+MA;AACA;AACA;AACA;AACA;AACA,KApNA;AAqNA,cArNA,sBAqNA,OArNA,EAqNA,QArNA,EAqNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAJA;AAKA;AACA,WARA;AASA;AACA;AACA,KA5OA,EAzDA;;AAuSA;AACA;AACA,aADA,mBACA,OADA,EACA,QADA,EACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,CAFA;;AAIA,OARA,EADA,EAvSA;;;AAmTA;AACA,yBADA;AAEA,oCAFA;AAGA,0BAHA,EAnTA;;;;;;AA4TA,wCA5TA,E;;;;;;;;;;;;;ACzGA;AAAA;AAAA;AAAA;AAAioC,CAAgB,wjCAAG,EAAC,C;;;;;;;;;;;ACArpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chat/chat.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chat/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=bf16e7f4&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=bf16e7f4&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-navbar/u-navbar\" */ \"@/uni_modules/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"chat-view\"\r\n\t\t<!-- #ifdef H5 -->\r\n\t\t\t:style=\"getHeight\"\r\n\t\t<!-- #endif -->\r\n\t\t:animation=\"animation\"\r\n\t\tid=\"chatView\"\r\n\t\t<!-- #ifdef MP -->\r\n\t\t\t:style=\"{\r\n\t\t\t\theight:getCharHeight+'px'\r\n\t\t\t}\"\r\n\t\t<!-- #endif -->\r\n\t>\r\n\t\t <u-navbar\r\n\t\t    :title=\"friendName\"\r\n\t\t    style=\"width: 100%;\"\r\n\t\t\tfixed\r\n\t\t\tplaceholder\r\n\t\t\t@leftClick=\"toBack\"\r\n\t\t>\r\n\t\t<template slot=\"left\">\r\n\t\t\t<text class=\"iconfont icon-fanhui\"></text>\r\n\t\t</template>\r\n\t\t\r\n\t\t<template slot=\"right\">\r\n\t\t\t<text class=\"iconfont icon-shenglvehao\"></text>\r\n\t\t</template>\r\n\t\t</u-navbar>\r\n\t\t\t<char-view :value=\"cruuendShowFriendChar\" :currentId=\"currentId\"\r\n\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\theight:getContextHeight+'px'\r\n\t\t\t\t\t}\"\r\n\t\t\t\t\t:animation=\"contextAnimation\"\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t:friendAvatar=\"friendAvatar\"\r\n\t\t\t\t@scrolltoupper=\"onScrolltoupper\"\r\n\t\t\t\t:isLoading=\"isScrollTop\"\r\n\t\t\t\t:isNomore=\"cruuendShowNumber >= getFriendChar.length\"\r\n\t\t\t></char-view>\r\n\t\t\t<view class=\"chat-view-button\"\r\n\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\tpaddingBottom:getBorderSecurity+'px'\r\n\t\t\t\t}\"\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t>\r\n\t\t\t\t<text class=\"iconfont icon-yuyin\"></text>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\t:maxlength=\"-1\"\r\n\t\t\t\t\tconfirm-type=\"send\"\r\n\t\t\t\t\tclass=\"chat-textarea\"\r\n\t\t\t\t\t@focus=\"onFocus\"\r\n\t\t\t\t\t@linechange=\"onLinechange\"\r\n\t\t\t\t\t@confirm=\"onConfirm\"\r\n\t\t\t\t\t@blur=\"onBlur\"\r\n\t\t\t\t\t:confirm-hold=\"true\"\r\n\t\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t\t@keyboardheightchange=\"onkeyboardheightchange\"\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\tv-model=\"textValue\"\r\n\t\t\t\t\t:show-confirm-bar=\"false\"\r\n\t\t\t\t\t:adjust-position=\"false\"\r\n\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\theight:inputHeight+'px'\r\n\t\t\t\t\t}\"\r\n\t\t\t\t></textarea>\r\n\t\t\t\t<text class=\"iconfont icon-biaoqing-xue\" @click=\"onClickShowExpression\"></text>\r\n\t\t\t\t<text class=\"iconfont icon-tianjia\" @click=\"onClickShowFunctionalAreas\"></text>\t\r\n\t\t\t</view>\r\n\t\t\t<FunctionalAreas :show=\"show\" :height=\"getFunctionalAreas\" :duration=\"duration\" @onChange=\"onChangeImg\" @onChangeLocation=\"onChangeLocation\"></FunctionalAreas>\r\n\t\t\t<Expression \r\n\t\t\t\t@onChange=\"onChangeValue\" \r\n\t\t\t\t:show=\"expressionShow\" \r\n\t\t\t\t:height=\"getFunctionalAreas\" \r\n\t\t\t\t:duration=\"duration\" \r\n\t\t\t\t:sendDisabled=\"isSendValue\" \r\n\t\t\t\t:clearDisabled=\"isValueLength\"\r\n\t\t\t\t@onClear=\"onClearValue\"\r\n\t\t\t\t@onSend=\"onConfirm\"\r\n\t\t\t></Expression>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t\r\n\t// #ifdef H5\r\n\timport h5 from \"./h5/h5.js\"\r\n\t// #endif\r\n\t\r\n\t\r\n\t// #ifdef MP\r\n\timport wx from \"./wx/wx.js\"\r\n\t// #endif\r\n\t\r\n\timport Socket from \"../../Socket/Socket.js\"\r\n\t\r\n\timport CharView from \"../../components/CharView.vue\"\r\n\timport FunctionalAreas from \"../../components/FunctionalAreas.vue\"\r\n\timport Expression from \"../../components/expression.vue\"\r\n\timport { duration } from \"../../config.js\"\r\n\timport { socket } from \"../../Socket/Socket.js\"\r\n\timport uploadMinxin from \"../../plugin/upload.js\"\r\n\timport { img,setMsgRead } from \"../../Api/index.js\"\r\n\t\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tshow:false,\r\n\t\t\t\tanimation:'',\r\n\t\t\t\tduration:duration,\r\n\t\t\t\tinputHeight:25,\r\n\t\t\t\tcurrentId:'',\r\n\t\t\t\ttextValue:'',\r\n\t\t\t\texpressionShow:false,\r\n\t\t\t\tlist:[],\r\n\t\t\t\tfriendId:'',\r\n\t\t\t\tfriendName:'',\r\n\t\t\t\tfriendAvatar:'',\r\n\t\t\t\tcruuendShowNumber:10,\r\n\t\t\t\t// 这个是滚动到顶部触发的加载事件\r\n\t\t\t\tisScrollTop:false,\r\n\t\t\t\tsetid:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tisValueLength(){\r\n\t\t\t\treturn this.textValue.length === 0\r\n\t\t\t},\r\n\t\t\tisSendValue(){\r\n\t\t\t\tlet val = this.textValue.trim()\r\n\t\t\t\treturn val.length === 0\r\n\t\t\t},\r\n\t\t\t// 排序后的数组\r\n\t\t\tgetFriendChar(){\r\n\t\t\t\tconst { userChar } = this;\r\n\t\t\t\t\r\n\t\t\t\tlet val = userChar[this.friendId] instanceof Array ? [...userChar[this.friendId]] : [];\r\n\t\t\t\t\r\n\t\t\t\t// 排序的时候顺便进行消息static 变成已读\r\n\t\t\t\tval.sort((a,b)=>{\r\n\t\t\t\t\treturn b.send_tiem - a.send_tiem\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn val\r\n\t\t\t},\r\n\t\t\t// 当前显示的数组不要一下子显示完\r\n\t\t\tcruuendShowFriendChar(){\r\n\t\t\t\tlet arr = [...this.getFriendChar].splice(0,this.cruuendShowNumber)\r\n\t\t\t\treturn arr.reverse()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options){\r\n\t\t\tconst { id,name,imgurl } = options\r\n\t\t\tif(id == undefined || name==undefined || imgurl == undefined) return\r\n\t\t\tthis.friendId = id\r\n\t\t\tthis.friendName = name\r\n\t\t\tthis.friendAvatar = imgurl\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.recordFriend()\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoBack(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta:1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcreatedAanimtion(fun,val,key){\r\n\t\t\t\tconst { duration } = this\r\n\t\t\t\tlet animation = uni.createAnimation({ duration })\r\n\t\t\t\tanimation[fun](val).step();\r\n\t\t\t\tthis[key] = animation.export()\r\n\t\t\t},\r\n\t\t\tscrollToPlace(item = 0){\r\n\t\t\t\tthis.currentId = '';\r\n\t\t\t\t setTimeout(()=>{\r\n\t\t\t\t\tthis.currentId = `index-${this.cruuendShowFriendChar.length - 1}`\r\n\t\t\t\t},item)\r\n\t\t\t},\r\n\t\t\tonConfirm(e){\r\n\t\t\t\tconst { value } = e.detail\r\n\t\t\t\tconst { userChar } = this;\r\n\t\t\t\tconst { userInfo,friendId,textValue } = this\r\n\t\t\t\t// 判断Value 是否是空\r\n\t\t\t\tlet val = textValue.trim();\r\n\t\t\t\t\r\n\t\t\t\tif(val.length > 0){\r\n\t\t\t\t\tconst val = {\r\n\t\t\t\t\t\tmsg:textValue,\r\n\t\t\t\t\t\ttypes:1,\r\n\t\t\t\t\t\tuserId:userInfo.userid,\r\n\t\t\t\t\t\tfriendId,\r\n\t\t\t\t\t\tsend_tiem:Date.now(),\r\n\t\t\t\t\t\tstatic:1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSendMssage({\r\n\t\t\t\t\t\tdata:val,\r\n\t\t\t\t\t\tcallback:() => this.addUserChar(friendId,val),\r\n\t\t\t\t\t\tsuccess:(data)=>{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.textValue = '',\r\n\t\t\t\t\tthis.scrollToPlace()\r\n\t\t\t\t}\r\n\t\t\t },\r\n\t\t\t onSendMssage(val){\r\n\t\t\t\t const {sendMssageService} = Socket.methods;\r\n\t\t\t\t sendMssageService(val)\r\n\t\t\t },\r\n\t\t\t onChangeImg({data}){\t\t\r\n\t\t\t\tconst { friendId ,userInfo} = this\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tthis.uploadMsgImgArr({\r\n\t\t\t\t\tArr:data,\r\n\t\t\t\t\tformData:{\r\n\t\t\t\t\t\tfriendId,\r\n\t\t\t\t\t\tuserId:userInfo.userid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\tres = JSON.parse(res.data);\r\n\t\t\t\t\t\tif(res.code == 200){\r\n\t\t\t\t\t\t\tthis.onSendMssage({data:res.data})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res,el){\r\n\t\t\t\t\t\t_this.PubSub.emit(el.onid,res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback:(fun,el,types)=>{\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet msgDate = {\r\n\t\t\t\t\t\t\tuserId:userInfo.userid,\r\n\t\t\t\t\t\t\tfriendId,\r\n\t\t\t\t\t\t\ttypes,\r\n\t\t\t\t\t\t\tmsg:el.path,\r\n\t\t\t\t\t\t\tsend_tiem:Date.now(),\r\n\t\t\t\t\t\t\tstatic:0,\r\n\t\t\t\t\t\t\tel:el,\r\n\t\t\t\t\t\t\tonProgressUpdate:fun\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.addUserChar(friendId,msgDate)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\t\t\r\n\t\t\t },\r\n\t\t\t onLinechange(e){\r\n\t\t\t \tconst {\theight , lineCount} = e.detail;\r\n\t\t\t \t\r\n\t\t\t \tif(lineCount > 5) return\r\n\t\t\t \t \r\n\t\t\t \t this.inputHeight = height\r\n\t\t\t },\r\n\t\t\t onChangeValue(e){\r\n\t\t\t\t const {id,value} = e;\t\r\n\t\t\t\t if(id==='1'){\r\n\t\t\t\t\tthis.textValue += value\r\n\t\t\t\t }else if(id === '2'){\r\n\t\t\t\t\tconst { userInfo,friendId } = this\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tname:value.name,\r\n\t\t\t\t\t\ttype:\"image/png\",\r\n\t\t\t\t\t\tpath:img + value.name,\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.uploadMsgImgArr({\r\n\t\t\t\t\t\tArr:[data],\r\n\t\t\t\t\t\tformData:{\r\n\t\t\t\t\t\t\tfriendId,\r\n\t\t\t\t\t\t\tuserId:userInfo.userid\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t\tres = JSON.parse(res.data);\r\n\t\t\t\t\t\t\tif(res.code == 200){\r\n\t\t\t\t\t\t\t\tthis.onSendMssage({data:res.data})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail:res=>{\r\n\t\t\t\t\t\t\t_this.PubSub.emit(el.onid,res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcallback:(fun,el,types)=>{\r\n\t\t\t\t\t\t\tlet msgDate = {\r\n\t\t\t\t\t\t\t\tuserId:userInfo.userid,\r\n\t\t\t\t\t\t\t\tfriendId,\r\n\t\t\t\t\t\t\t\ttypes,\r\n\t\t\t\t\t\t\t\tmsg:el.path,\r\n\t\t\t\t\t\t\t\tsend_tiem:Date.now(),\r\n\t\t\t\t\t\t\t\tstatic:0,\r\n\t\t\t\t\t\t\t\tel:el,\r\n\t\t\t\t\t\t\t\tonProgressUpdate:fun\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.userChar[friendId].push(msgDate)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t }\r\n\t\t\t },\r\n\t\t\t onClearValue(val){\r\n\t\t\t\t const {textValue} = this\r\n\t\t\t\t let last = textValue[textValue.length - 1];\r\n\t\t\t\t let code = last.charCodeAt(0);\r\n\t\t\t\t let len = val[code];\r\n\t\t\t\t \r\n\t\t\t\t if(len !== undefined){\r\n\t\t\t\t\tlet num = textValue.length - len < 0 ? 0 : textValue.length - len\r\n\t\t\t\t\tthis.textValue = textValue.slice(0,num);\r\n\t\t\t\t }else{\r\n\t\t\t\t\t this.textValue =  textValue.slice(0,textValue.length - 1);\r\n\t\t\t\t }\r\n\t\t\t },\r\n\t\t\t // 记录打开的用户下次的时候就不会更新了\r\n\t\t\t recordFriend(friendId = this.friendId){\r\n\t\t\t\tconst { userid } = this.userInfo\r\n\t\t\t\tlet result =  uni.getStorageSync('user_dialogue');\r\n\t\t\t\t\r\n\t\t\t\tresult = result == '' || result == undefined ? {} : JSON.parse(this.decrypt(result))\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(result[userid] == undefined)  result[userid] = {} \r\n\t\t\t\t\r\n\t\t\t\tlet val = result[userid];\r\n\t\t\t\t\r\n\t\t\t\tif(val[friendId] == undefined){\r\n\t\t\t\t\tval[friendId] = true;\r\n\t\t\t\t\tthis.$store.state.list = result;\r\n\t\t\t\t\tresult = this.encrypt(JSON.stringify(result));\r\n\t\t\t\t\tuni.setStorageSync('user_dialogue',result);\r\n\t\t\t\t}\r\n\t\t\t },\r\n\t\t\t onScrolltoupper(e){\r\n\t\t\t\tif(this.isScrollTop == true) return\r\n\t\t\t\t\r\n\t\t\t\tthis.isScrollTop = true\r\n\t\t\t\t\r\n\t\t\t\tif(this.cruuendShowNumber >= this.getFriendChar.length){\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tthis.isScrollTop = false\r\n\t\t\t\t\t},1000)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tlet load = this.cruuendShowNumber;\r\n\t\t\t\t\tthis.cruuendShowNumber += 10\r\n\t\t\t\t\tthis.currentId = '';\r\n\t\t\t\t\t\t// 获取最新节点的信息/\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tthis.currentId = `index-${this.cruuendShowNumber - load}`\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tthis.isScrollTop = false\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t},0)\r\n\t\t\t\t},1000)\r\n\t\t\t },\r\n\t\t\t // 获取地址\r\n\t\t\t onChangeLocation(value){\r\n\t\t\t\t const { friendId,userInfo} = this\r\n\t\t\t\t const val = {\r\n\t\t\t\t \tmsg:JSON.stringify(value),\r\n\t\t\t\t \ttypes:4,\r\n\t\t\t\t \tuserId:userInfo.userid,\r\n\t\t\t\t \tfriendId,\r\n\t\t\t\t \tsend_tiem:Date.now(),\r\n\t\t\t\t \tstatic:1\r\n\t\t\t\t }\r\n\t\t\t\tthis.onSendMssage({\r\n\t\t\t\t\tdata:val,\r\n\t\t\t\t\tcallback:()=>{\r\n\t\t\t\t\t\tthis.addUserChar(friendId,val)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t },\r\n\t\t\taddUserChar(key,val){\r\n\t\t\t\tif(!(this.userChar[key] instanceof Array)) {\r\n\t\t\t\t\tthis.$set(this.userChar,key,[])\r\n\t\t\t\t}\r\n\t\t\t\tthis.userChar[key].push(val) \r\n\t\t\t},\r\n\t\t\tsetMsgRead(newName,loadName){\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tif(newName instanceof Array && newName.length > 0 && loadName instanceof Array){\t\r\n\t\t\t\t\tlet nums =newName.length -  loadName.length \r\n\t\t\t\t\tfor(let i = 0; i < nums;i++){\r\n\t\t\t\t\t\tlet el = newName[i];\r\n\t\t\t\t\t\tif(el.userId !== this.userInfo.userid && el.static == 1){\r\n\t\t\t\t\t\t\tarr.push(el.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(arr.length > 0 ){\r\n\t\t\t\t\t\tsetMsgRead(arr,res=>{\r\n\t\t\t\t\t\t\tif(res.data.code == 200 ){\r\n\t\t\t\t\t\t\t\tthis.getFriendChar.forEach(el=>{\r\n\t\t\t\t\t\t\t\t\tif(arr.indexOf(el.id) !== -1){\r\n\t\t\t\t\t\t\t\t\t\tel.static = '0'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tgetFriendChar:{\r\n\t\t\t\thandler(newName,loadName) {\r\n\t\t\t\t\tthis.setMsgRead(newName,loadName)\r\n\t\t\t\t\tclearTimeout(this.setid)\r\n\t\t\t\t\tthis.setid = setTimeout(()=>{\r\n\t\t\t\t\t\tthis.scrollToPlace();\r\n\t\t\t\t\t},0)\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\t'char-view':CharView,\r\n\t\t\tFunctionalAreas,\r\n\t\t\tExpression\r\n\t\t},\r\n\t\t// #ifdef H5\r\n\t\t\tmixins:[h5,uploadMinxin]\r\n\t\t// #endif\r\n\t\t// #ifdef MP\r\n\t\t\tmixins:[wx,uploadMinxin]\r\n\t\t// #endif\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.chat-view{\r\n\t\theight: 100vh;\r\n\t\toverflow: hidden;\r\n\t\tbackground-color:$uni-ba-color-ligre ;\r\n\t\t.iconfont{\r\n\t\t\tfont-size: $uni-font-icon-sm;\r\n\t\t}\r\n\t\tdisplay: flex;\r\n\t\tflex-direction:column;\r\n\t\t.chat-view-button{\r\n\t\t\ttransition:  all 0.2s;\r\n\t\t\tpadding: 5px 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: 100%;\r\n\t\t\talign-items: flex-end;\r\n\t\t\tborder-top: solid 1px $uni-border-color;\r\n\t\t\tbackground-color: $uni-ba-color-ligre;\r\n\t\t\t.chat-textarea{\r\n\t\t\t\tborder: solid 1px $uni-border-color;\r\n\t\t\t\tborder-radius: $uni-border-radius-sm;\r\n\t\t\t\tline-height: 25px;\r\n\t\t\t\theight: 25px;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tpadding: 3px 5px;\r\n\t\t\t\tbackground-color: $uni-bg-color;\r\n\t\t\t}\r\n\t\t\t.iconfont{\r\n\t\t\t\tfont-size: $uni-font-icon-el;\r\n\t\t\t\tpadding: 0 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1646625161231\n      var cssReload = require(\"C:/Users/91645/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}